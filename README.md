# A2A Essay Pipeline

FastAPI-ัะตัะฒะธั ั A2A (Agent-to-Agent) ะบะพะฝะฒะตะนะตัะพะผ ะดะปั ะฝะฐะฟะธัะฐะฝะธั ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ัััะต ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ OpenAI GPT-4.

## ะะพะทะผะพะถะฝะพััะธ

- **ะะณะตะฝั-ะฟะธัะฐัะตะปั ัััะต**: ะะตะฝะตัะธััะตั ัััะต ะฝะฐ ะทะฐะดะฐะฝะฝัะต ัะตะผั
- **ะะณะตะฝั-ัะตะดะฐะบัะพั ััะธะปั**: ะฃะปัััะฐะตั ััะธะปั ะธ ััะฝะพััั ัะตะบััะฐ
- **A2A ะธะฝัะตะณัะฐัะธั**: ะะณะตะฝัั ะพะฑัะฐัััั ัะตัะตะท ะฟัะพัะพะบะพะป Google Agent-to-Agent
- **OpenAI ะธะฝัะตะณัะฐัะธั**: ะัะฟะพะปัะทัะตั GPT-4 ะดะปั ะณะตะฝะตัะฐัะธะธ ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ะบะพะฝัะตะฝัะฐ

## ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Python 3.10+
- ะะปัั API OpenAI
- ะะตะฝะตะดะถะตั ะฟะฐะบะตัะพะฒ uv

## ะฃััะฐะฝะพะฒะบะฐ

```bash
# ะฃััะฐะฝะพะฒะบะฐ uv, ะตัะปะธ ะฝะต ัััะฐะฝะพะฒะปะตะฝ
pip install uv

# ะกะธะฝััะพะฝะธะทะฐัะธั ะทะฐะฒะธัะธะผะพััะตะน
uv sync
```

## ะะฐัััะพะนะบะฐ

1. ะกะบะพะฟะธััะนัะต ะฟัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ:

```bash
cp config.json.example config.json
```

2. ะััะตะดะฐะบัะธััะนัะต `config.json` ะธ ัะบะฐะถะธัะต ะฒะฐั ะบะปัั API OpenAI:

```json
{
  "openai_api_key": "your-openai-api-key-here"
}
```

**ะะฐะถะฝะพ:** ะคะฐะนะป `config.json` ะดะพะฑะฐะฒะปะตะฝ ะฒ `.gitignore` ะธ ะฝะต ะฑัะดะตั ะบะพะผะผะธัะธัััั ะฒ ัะตะฟะพะทะธัะพัะธะน.

## ะะฐะฟััะบ

### ๐ ะะฐัะธะฐะฝั 1: ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ

#### ะกะตัะฒะตั
```bash
# ะะฐะฟััะบ ั uvicorn
uv run uvicorn app.server:app --host 0.0.0.0 --port 8000

# ะะปะธ ัะตัะตะท Python ะผะพะดัะปั
uv run python -m app.server
```

#### ะะปะธะตะฝั
```bash
uv run python client/run_essay_workflow.py
```

### ๐ณ ะะฐัะธะฐะฝั 2: Docker (ัะตะบะพะผะตะฝะดัะตััั)

#### ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ัะตัะตะท Docker Compose
```bash
# ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ
docker-compose up -d --build

# ะะปะธ ะตัะปะธ ะธัะฟะพะปัะทัะตัะต ะฝะพะฒัะน Docker Compose
docker compose up -d --build
```

#### ะัะพะฒะตัะบะฐ ะทะฐะฟััะบะฐ
```bash
# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ะฐะณะตะฝัะฐ
curl http://localhost:8000/.well-known/agent-card.json

# ะะฐะฟััะบ ะดะตะผะพะฝัััะฐัะธะธ
./demo.sh

# ะขะตััะธัะพะฒะฐะฝะธะต ัะตัะตะท curl
./test_a2a_curl.sh "ะฒะฐัะฐ ัะตะผะฐ ัััะต"
```

#### ะััะฐะฝะพะฒะบะฐ
```bash
docker-compose down
# ะธะปะธ
docker compose down
```

### ๐ง ะะฐัััะพะนะบะฐ

1. **API ะบะปัั OpenAI**:
   ```bash
   # ะกะบะพะฟะธััะนัะต ะฟัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
   cp config.json.example config.json

   # ะััะตะดะฐะบัะธััะนัะต config.json ั ะฒะฐัะธะผ API ะบะปััะพะผ
   # ะะปั Docker ะบะปัั ะฑัะดะตั ัะผะพะฝัะธัะพะฒะฐะฝ ะบะฐะบ volume
   ```

2. **ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั** (ะพะฟัะธะพะฝะฐะปัะฝะพ):
   ```bash
   export OPENAI_API_KEY="your-key-here"
   ```

### ๐ก A2A API - ะฒัะทะพะฒั ัะตัะตะท curl

#### ะะพะปััะตะฝะธะต ะบะฐััั ะฐะณะตะฝัะฐ
```bash
curl http://localhost:8000/.well-known/agent-card.json
```

#### ะัะฟัะฐะฒะบะฐ ะทะฐะดะฐัะธ ะฝะฐ ะฝะฐะฟะธัะฐะฝะธะต ัััะต
```bash
curl -X POST http://localhost:8000/rpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "essay-request-1",
    "method": "send_message",
    "params": {
      "message": {
        "role": "user",
        "parts": [{
          "root": {
            "text": "ะธัะบััััะฒะตะฝะฝัะน ะธะฝัะตะปะปะตะบั",
            "mime_type": "text/plain"
          }
        }]
      },
      "streaming": true
    }
  }'
```

#### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
```bash
curl -f http://localhost:8000/.well-known/agent-card.json
```

## ะััะธัะตะบัััะฐ

### ๐๏ธ A2A ะญะบะพัะธััะตะผะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโ
โ   A2A Client    โโโโโถโ  A2AEssayPipeline    โ
โ                 โ    โ  Agent Executor      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                    โโโโโโโโโโโผโโโโโโโโโโ
                    โ         โ         โ
            โโโโโโโโโผโโโโ โโโโผโโโโ โโโโโผโโโโโ
            โEssay Agentโ โStyleโ โ  A2A   โ
            โ(OpenAI)   โ โAgentโ โ  RPC   โ
            โโโโโโโโโโโโโ โโโโโโโ โโโโโโโโโโ
```

### ๐ ะะฐะฑะพัะธะน ะฟัะพัะตัั

1. **ะะปะธะตะฝั** ะพัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั ะฐะณะตะฝัั ัะตัะตะท A2A API (`POST /rpc`)
2. **EssayPipeline Agent** ะฟะพะปััะฐะตั ะทะฐะดะฐัั ะธ ะพะฟัะตะดะตะปัะตั ะฝะฐะฒัะบ
3. **Essay Agent** ะณะตะฝะตัะธััะตั ะฟะตัะฒะพะฝะฐัะฐะปัะฝัะน ะบะพะฝัะตะฝั ัะตัะตะท OpenAI GPT-4
4. **Style Editor Agent** ัะปัััะฐะตั ััะธะปั ัะตะบััะฐ ัะตัะตะท OpenAI GPT-4
5. **ะะตะทัะปััะฐั** ะฒะพะทะฒัะฐัะฐะตััั ะบะปะธะตะฝัั ัะตัะตะท A2A streaming

### ๐ฆ Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั

- **Base image**: `python:3.11-slim`
- **Package manager**: `uv` ะดะปั ะฑััััะพะน ัััะฐะฝะพะฒะบะธ ะทะฐะฒะธัะธะผะพััะตะน
- **Security**: ะทะฐะฟััะบ ะพั ะฝะตะฟัะธะฒะธะปะตะณะธัะพะฒะฐะฝะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
- **Health checks**: ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ะฐะณะตะฝัะฐ
- **Volume mounting**: ะบะพะฝัะธะณััะฐัะธั ะผะพะฝัะธััะตััั ะบะฐะบ volume

## API Endpoints

### A2A Protocol
- `GET /.well-known/agent-card.json` - ะบะฐััะฐ ะฐะณะตะฝัะฐ ั ะฝะฐะฒัะบะฐะผะธ
- `POST /rpc` - A2A RPC ะดะปั ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธะน

### Web Interface
- `GET /docs` - ะธะฝัะตัะฐะบัะธะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั OpenAPI
- `GET /openapi.json` - ััะตะผะฐ OpenAPI JSON

## ะะฐะทัะฐะฑะพัะบะฐ

```bash
# ะัะพะฒะตัะบะฐ ะบะพะดะฐ ะปะธะฝัะตัะพะผ
uv run ruff check .

# ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะดะฐ
uv run ruff format .
```

## ะะธัะตะฝะทะธั

MIT License
